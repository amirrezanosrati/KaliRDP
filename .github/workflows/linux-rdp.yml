name: Kali Linux Tools
on:
  workflow_dispatch:

jobs:
  kali-tools:
    runs-on: ubuntu-latest
    steps:
    - name: Check Docker version
      run: |
        echo "ğŸ³ Using pre-installed Docker:"
        docker --version
        docker info | grep "Containers:\|Images:\|Storage Driver:"

    - name: Pull Kali Linux image
      run: |
        docker pull kalilinux/kali-rolling
        echo "âœ… Kali image downloaded"

    - name: Run basic Kali tools
      run: |
        echo "ğŸ”§ Running Kali tools without installation..."
        
        # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² tools Ø¨Ø¯ÙˆÙ† Ù†ØµØ¨ Ø§Ø¶Ø§ÙÛŒ
        echo "1. Testing Kali base image:"
        docker run --rm kalilinux/kali-rolling cat /etc/os-release
        
        echo "2. Available tools in base image:"
        docker run --rm kalilinux/kali-rolling bash -c "ls /usr/bin | grep -E '(nmap|sqlmap|curl|wget|netcat)' | head -10"
        
        echo "3. Checking what's available:"
        docker run --rm kalilinux/kali-rolling bash -c "
          echo 'Python:'; which python3 || echo 'Not found'
          echo 'Perl:'; which perl || echo 'Not found' 
          echo 'Bash:'; which bash || echo 'Not found'
          echo 'Basic tools available!'
        "

    - name: Install minimal tools
      run: |
        echo "ğŸ“¦ Installing minimal tools..."
        docker run --rm kalilinux/kali-rolling bash -c "
          apt-get update -y &&
          apt-get install -y --no-install-recommends \
            nmap \
            curl \
            wget \
            dnsutils \
            netcat-traditional &&
          echo 'âœ… Minimal tools installed' &&
          nmap --version &&
          curl --version
        "

    - name: Run security examples
      run: |
        echo "ğŸ¯ Running security examples..."
        
        # Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ
        echo "1. Network scan:"
        docker run --rm kalilinux/kali-rolling nmap -sP 8.8.8.8
        
        echo "2. HTTP test:"
        docker run --rm kalilinux/kali-rolling curl -I https://google.com
        
        echo "3. DNS lookup:"
        docker run --rm kalilinux/kali-rolling nslookup google.com
        
        echo "4. Netcat test:"
        docker run --rm kalilinux/kali-rolling nc -zv google.com 80

    - name: Create Kali tools cheat sheet
      run: |
        echo "=========================================="
        echo "ğŸ¯ KALI LINUX TOOLS CHEAT SHEET"
        echo "=========================================="
        echo "ğŸš€ Basic Commands:"
        echo "docker run --rm kalilinux/kali-rolling nmap [options]"
        echo "docker run --rm kalilinux/kali-rolling curl [url]"
        echo "docker run --rm kalilinux/kali-rolling nslookup [domain]"
        echo ""
        echo "ğŸ”§ Network Scanning:"
        echo "nmap -sP 8.8.8.8          # Ping scan"
        echo "nmap -sS google.com       # SYN scan" 
        echo "nmap -sV example.com      # Version detection"
        echo ""
        echo "ğŸŒ Web Testing:"
        echo "curl -I https://site.com  # HTTP headers"
        echo "curl -X GET https://site.com # GET request"
        echo ""
        echo "ğŸ“¡ DNS Tools:"
        echo "nslookup google.com       # DNS lookup"
        echo "dig google.com            # DNS query"
        echo "=========================================="

    - name: Keep alive for more commands
      run: |
        echo "ğŸŸ¢ Kali tools are ready to use!"
        echo "ğŸ’¡ Add your custom commands in the workflow"
        echo "â° Running for 15 minutes..."
        sleep 900
